<% content_for :page_title, @product.name %>

<div class="max-w-4xl mx-auto p-6">
  <!-- Header -->
  <div class="mb-6 flex items-center justify-between">
    <%= link_to products_path, class: "text-blue-600 hover:text-blue-800 flex items-center" do %>
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Back to Products
    <% end %>
    
    <% if current_user.business_owner? %>
      <%= link_to "Edit Product", edit_product_path(@product), class: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700" %>
    <% end %>
  </div>

  <!-- Product Details Card -->
  <div class="bg-white rounded-lg shadow border border-gray-200 p-6">
    <h1 class="text-2xl font-bold text-gray-900 mb-6"><%= @product.name %></h1>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Basic Info -->
      <div class="space-y-4">
        <div>
          <label class="text-sm font-medium text-gray-500">Category</label>
          <p class="text-gray-900"><%= @product.category || 'N/A' %></p>
        </div>
        
        <div>
          <label class="text-sm font-medium text-gray-500">SKU</label>
          <p class="text-gray-900"><%= @product.sku || 'N/A' %></p>
        </div>
        
        <div>
          <label class="text-sm font-medium text-gray-500">Unit</label>
          <p class="text-gray-900"><%= @product.unit || 'piece' %></p>
        </div>
        
        <% if @product.expiry_date.present? %>
        <div>
          <label class="text-sm font-medium text-gray-500">Expiry Date</label>
          <p class="text-gray-900"><%= @product.expiry_date.strftime("%Y-%m-%d") %></p>
        </div>
        <% end %>
      </div>
      
      <!-- Pricing & Stock -->
      <div class="space-y-4">
        <% if current_user.business_owner? %>
        <div>
          <label class="text-sm font-medium text-gray-500">Buying Price</label>
          <p class="text-lg font-semibold text-gray-900">₨<%= number_with_delimiter(@product.buying_price) %></p>
        </div>
        <% end %>
        
        <div>
          <label class="text-sm font-medium text-gray-500">Selling Price</label>
          <p class="text-lg font-semibold text-green-600">₨<%= number_with_delimiter(@product.selling_price) %></p>
        </div>
        
        <% if current_user.business_owner? %>
        <div>
          <label class="text-sm font-medium text-gray-500">Profit Per Unit</label>
          <p class="text-lg font-semibold text-blue-600">₨<%= number_with_delimiter(@product.selling_price - @product.buying_price) %></p>
        </div>
        <% end %>
        
        <div>
          <label class="text-sm font-medium text-gray-500">
            <%= current_user.business_owner? ? 'Total Stock' : 'Shop Stock' %>
          </label>
          <p class="text-lg font-semibold text-gray-900">
            <%= current_user.business_owner? ? @product.total_business_inventory : @product.quantity_in_shop(current_user.shop) %> <%= @product.unit || 'units' %>
          </p>
        </div>
      </div>
    </div>
    
    <% if @product.description.present? %>
    <div class="mt-6 pt-6 border-t border-gray-200">
      <label class="text-sm font-medium text-gray-500">Description</label>
      <p class="mt-2 text-gray-900"><%= @product.description %></p>
    </div>
    <% end %>
  </div>
</div>
