<tr class="hover:bg-gray-50 <%= 'bg-red-50' if product&.expiry_status == 'expired' %> <%= 'bg-yellow-50' if product&.expiry_status == 'critical' %>">
  <!-- Image -->
  <td class="px-4 py-3">
    <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden">
      <% if product.image_url.present? %>
        <img src="<%= product.image_url %>" alt="<%= product.name %>" class="w-full h-full object-cover">
      <% else %>
        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
        </svg>
      <% end %>
    </div>
  </td>
  
  <!-- Name & Category -->
  <td class="px-4 py-3">
    <%= link_to product.name, product_path(product), class: "font-medium text-gray-900 hover:text-blue-600" %>
    <div class="text-sm text-gray-500"><%= product.category || 'N/A' %></div>
  </td>
  
  <!-- Stock -->
  <td class="px-4 py-3 text-center">
    <div class="font-semibold text-gray-900">
      <%= current_user.business_owner? ? product.total_business_inventory : product.quantity_in_shop(current_user.shop) %>
    </div>
    <div class="text-xs text-gray-500"><%= product.unit || 'units' %></div>
  </td>
  
  <!-- Buying Price (Owner Only) -->
  <% if current_user.business_owner? %>
    <td class="px-4 py-3 text-right">
      <div class="font-medium text-gray-700">₨<%= number_with_delimiter(product.buying_price) %></div>
    </td>
  <% end %>
  
  <!-- Selling Price -->
  <td class="px-4 py-3 text-right">
    <div class="font-semibold text-green-700">₨<%= number_with_delimiter(product.selling_price) %></div>
  </td>
  
  <!-- Expiry -->
  <td class="px-4 py-3 text-center">
    <% if product.expiry_date.present? %>
      <div class="text-sm text-gray-900"><%= product.expiry_date.strftime("%Y-%m-%d") %></div>
      <% if product.expiry_status == 'expired' %>
        <span class="text-xs text-red-600">Expired</span>
      <% elsif product.expiry_status == 'critical' %>
        <span class="text-xs text-red-600"><%= product.days_to_expiry %> days</span>
      <% elsif product.expiry_status == 'warning' %>
        <span class="text-xs text-yellow-600"><%= product.days_to_expiry %> days</span>
      <% end %>
    <% else %>
      <span class="text-sm text-gray-400">No expiry</span>
    <% end %>
  </td>
  
  <!-- Actions -->
  <td class="px-4 py-3 text-right">
    <% if current_user.business_owner? %>
      <div class="flex items-center justify-end gap-2">
        <%= link_to edit_product_path(product), class: "text-blue-600 hover:text-blue-800" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
          </svg>
        <% end %>
        
        <%= link_to product_path(product), 
            data: { turbo_method: :delete, turbo_confirm: "Delete #{product.name}?" },
            class: "text-red-600 hover:text-red-800" do %>
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
          </svg>
        <% end %>
      </div>
    <% else %>
      <span class="text-xs text-gray-400">View only</span>
    <% end %>
  </td>
</tr>
