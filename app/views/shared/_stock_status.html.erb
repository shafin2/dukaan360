<% 
  # Get quantity from shop inventory if user is a shop worker, otherwise show total business inventory
  quantity = if current_user.shop_worker? && current_user.shop.present?
               product.quantity_in_shop(current_user.shop)
             else
               product.total_business_inventory
             end
%>

<% if quantity <= 0 %>
  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
    Out of Stock
  </span>
<% elsif quantity <= 10 %>
  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
    Low Stock
  </span>
<% elsif quantity <= 50 %>
  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
    Medium Stock
  </span>
<% else %>
  <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
    In Stock
  </span>
<% end %>
